<!DOCTYPE html>
<html lang="en">
<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
Â  <title>Simple Upload Log</title>
Â  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@1.35.6/dist/umd/supabase.min.js"></script>
Â  <style>
Â  Â  body { font-family: sans-serif; background: #f0f2f5; padding: 2rem; max-width: 600px; margin: auto; }
Â  Â  .card { background: white; border-radius: 12px; padding: 1rem; margin-bottom: 1rem; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
Â  Â  .timestamp { color: #888; font-size: 0.9rem; }
Â  Â  .note { margin-top: 0.5rem; }
Â  Â  .preview-img { max-width: 100%; border-radius: 8px; margin-top: 0.5rem; }
Â  </style>
</head>
<body>

Â  <h2>ğŸ“¤ Upload File Log</h2>
Â  <div class="card">
Â  Â  <input type="file" id="fileInput" /><br><br>
Â  Â  <textarea id="noteInput" rows="3" placeholder="à¹€à¸‚à¸µà¸¢à¸™à¹‚à¸™à¹‰à¸•à¹€à¸à¸µà¹ˆà¸¢à¸§à¸à¸±à¸šà¹„à¸Ÿà¸¥à¹Œà¸™à¸µà¹‰..." style="width: 100%;"></textarea><br><br>
Â  Â  <button onclick="upload()">Upload</button>
Â  </div>

Â  <h3>ğŸ“ Uploaded Logs</h3>
Â  <div id="logArea"></div>

Â  <script>
Â  Â  const supabaseUrl = 'https://fkntlawaawawiusmjsez.supabase.co'
Â  Â  const supabaseKey = 'YOUR_KEY'
Â  Â  const supabase = supabase.createClient(supabaseUrl, supabaseKey)

Â  Â  const logArea = document.getElementById("logArea")
Â  Â  async function loadUploads() {
Â  Â  Â  const { data, error } = await supabase
Â  Â  Â  Â  .from('uploads')
Â  Â  Â  Â  .select('*')
Â  Â  Â  Â  .order('created_at', { ascending: false })
Â  Â  Â  if (error) return console.error(error)
Â  Â  Â  logArea.innerHTML = ''
Â  Â  Â  data.forEach(renderItem)
Â  Â  }

Â  Â  function renderItem(item) {
Â  Â  Â  const card = document.createElement("div")
Â  Â  Â  card.className = "card"
Â  Â  Â  card.innerHTML = `
Â  Â  Â  Â  <div><strong>${item.file_name}</strong></div>
Â  Â  Â  Â  <div class="note">ğŸ“ ${item.note}</div>
Â  Â  Â  Â  <img src="${item.file_url}" class="preview-img" />
Â  Â  Â  Â  <div class="timestamp">ğŸ“… ${new Date(item.created_at).toLocaleString()}</div>
Â  Â  Â  `
Â  Â  Â  logArea.appendChild(card)
Â  Â  }

Â  Â  async function upload() {
Â  Â  Â  const file = document.getElementById("fileInput").files[0]
Â  Â  Â  const note = document.getElementById("noteInput").value
Â  Â  Â  if (!file) return alert("à¸à¸£à¸¸à¸“à¸²à¹€à¸¥à¸·à¸­à¸à¹„à¸Ÿà¸¥à¹Œ")
Â  Â  Â  const path = `${Date.now()}_${file.name}`

Â  Â  Â  const { data: uploadData, error: uploadError } = await supabase
Â  Â  Â  Â  .storage
Â  Â  Â  Â  .from('uploads')
Â  Â  Â  Â  .upload(path, file)
Â  Â  Â  if (uploadError) return console.error(uploadError)

Â  Â  Â  const { publicURL, error: urlError } = supabase
Â  Â  Â  Â  .storage
Â  Â  Â  Â  .from('uploads')
Â  Â  Â  Â  .getPublicUrl(path)
Â  Â  Â  if (urlError) return console.error(urlError)

Â  Â  Â  const { error: insertError } = await supabase
Â  Â  Â  Â  .from('uploads')
Â  Â  Â  Â  .insert({
Â  Â  Â  Â  Â  file_name: file.name,
Â  Â  Â  Â  Â  file_url: publicURL.publicURL,
Â  Â  Â  Â  Â  note
Â  Â  Â  Â  })
Â  Â  Â  if (insertError) return console.error(insertError)

Â  Â  Â  document.getElementById("fileInput").value = ""
Â  Â  Â  document.getElementById("noteInput").value = ""
Â  Â  Â  loadUploads()
Â  Â  }

Â  Â  loadUploads()
Â  </script>

</body>
</html>
